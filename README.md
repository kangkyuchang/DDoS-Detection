# 프로젝트 개요
### 해결하려는 문제 정의
최근 발생한 대규모 온라인 대회(예: 2024년 LCK DDoS 공격 사건)에서도 알 수 있듯이, **DDoS(분산 서비스 거부)공격**은 저렴하고 쉬운 도구로 실행 가능하며, 서버 운영 시 가장 빈번하고 치명적인 위협입니다.
다양한 공격 유형으로 인해 방어가 어렵고 **24시간 실시간 모니터링**이 필수적으로 요구되어집니다.  
특히, **Syn Flooding**과 **UDP Flooding**은 가장 흔하게 발생하는 L3/L4 계층 공격 유형으로, 서비스 마비를 초래하여 기업 및 서비스 제공자에게 막대한 금전적, 신뢰적 손실을 입힙니다.
### AI/딥러닝 선정 이유
기존의 정적 방어 시스템이나 패턴 기반 탐지 방식은 끊임없이 변화하는 **다양한 DDoS 공격 유형**과 **실시간 대용량 트래픽 처리**에 한계가 있습니다.  
이를 해결하기 위해, **딥러닝(Deep Learning)** 모델이 가진 **복잡한 비선형 패턴 인식 능력**을 활용하여:  
1. 대규모 네트워크 패킷 데이터 속에서 **정상/공격 트래픽을 실시간으로 분류**하고,
2. 사전에 정의되지 않은 **새로운 공격 유형에 대한 일반화된 탐지 능력**을 확보함으로써, **지능적이고 자동화된 보안 시스템**을 구축하고자 했습니다.
### 최종 목표 및 평가 지능
| 목표 항목 | 핵심 내용 |
|:---|:---|
| **핵심 공격 유형 탐지** | 공격 빈도가 높은 **SYN Flooding**과 **UDP Flooding**에 특화된 모델 개발 |
| **정량적 성능 목표** | **90% 이상**의 높은 **탐지 정확도** 달성 |
| **운영 효율성** | 실제 서비스 환경 적용을 위해 **낮은 탐지 시간** 확보 |
| **일반화 능력 검증** | 훈련에 사용되지 않은 **그 외 DDoS 공격 유형**에 대한 모델의 **탐지 성능(일반화)** 확인

<br>

# 데이터 분석 및 전처리 (Data Analysis & Preprocessing)
### 1. 데이터 출처 및 구성
| 구분 | 데이터셋 명 | 특징 | 용도 |
|:---|:---|:---|:---|
| **주 데이터(학습/검증)** | **CIC-DDoS-2019** | **85개 Features**, 총 **12만 개**의 데이터(BENIGN, Syn Flooding, UDP Flooding 각 4만 개)를 **균형 있게 구성** | 핵심 공격 유형(Syn, UDP) 탐지 모델 학습 및 성능 검증 |
| **외부 평가 데이터** | **CIC-DDoS-2019(Kanggle)** | **22만 개**의 행으로, 모든 DDoS 공격 유형을 **'DDoS'** 레이블로 통합 | 모델의 **일반화 능력** 및 **기타 공격 유형**에 대한 탐지 능력 평가 |

<br>

### 2. 데이터 전처리 및 변환
| 단계 | 기법 | 상세 내용 |
|:---|:---|:---|
| **결측치 처리** | **중앙값 대체** | 데이터 이상치 영향 최소화를 위해 해당 Feature의 **중앙값**을 이용하여 결측치 처리 |
| **시퀀스 변환** | **슬라이딩 윈도우** | 네트워크 트래픽의 **시간적 순서성** 학습을 위해 **윈도우 크기 100**으로 설정, 1칸씩 밀어 시퀀스 입력데이터 형태로 변환 |
| **레이블 처리** | **이진 분류 변환** | 기존 3가지 레이블(BENIGN, Syn, UDP)을 **정상(BENIGN)** 과 **공격(ATTACK)** 의 **이진 분류** 형태로 통합하여 모델의 학습 초점을 **DDoS 탐지 자체**에 맞춤 |

<br>

### 3. 정규화 및 스케일링 문제 극복
| 문제 발생(초기시도) | 원인 파악 | 해결 방안 |
|:---|:---|:---|
| **MinMaxScaler** 적용 후 **SYN Flooding** 탐지 성능 저하 문제 발생 | MinMaxScaler가 **이상치(Outliers)** 에 민감하게 반응하여, SYN 공격 트래픽의 **비정상적인 분포 특성**을 효과적으로 반영하지 못했을 가능성 파악 | **RobustScaler**로 정규화 방식 전환 |
| **RobustScaler** 사용 | 이상치 영향을 덜 받는 **중앙값**과 **사분위수(IQR)** 를 사용하여 데이터를 스케일링 | Syn Flooding과 같은 이상치 경향이 강한 트래픽 패턴에 대해 **강건한(Robust) 탐지 성능 확보** |

<br>

### 4. 특징 공학 및 선택
- **제외 특징**: 출발지/목적지 IP/Port, 타임스탬프, 레이블, Inbound, 유사 HTTP 등 **식별자**나 **단일 트래픽 특성**에 집중된 8개 열 제외
- **특징 선택**: 남아있는 77개 Feature에 대해 **Random Forest** 모델의 중요도와 **재귀적 특징 제거(RFECV)** 기법을 결합하여 최적 특징(Feature) 탐색
- **최종 특징**: 탐지 성능을 극대화할 수 있는 **21개의 핵심 특징(Feature)**을 최종적으로 선택하여 모델 입력으로 사용

<br>

# 모델링 및 실험 (Modeling & Experimentation)
핵심 목표인 **SYN/UDP Flooding 탐지**를 넘어 **다양한 미지의 공격 유형에 대한 일반화된 탐지 능력**을 확보하기 위해, 다양한 딥러닝 모델 아키텍처와 비정상 탐지 기법을 결합하는 실험을 진행했습니다.
### 1. 초기 모델 선정 및 학습전략
네트워크 트래픽 데이터의 **시퀀스** 및 **패턴** 특성을 고려하여 다음과 같은 모델을 선정하고 **기본 튜닝**을 적용하여 성능을 확인했습니다.
| 모델 아키텍처 | 특징 | 초기 성능 평가 |
|:---|:---|:---|
| **1D CNN** | 슬라이딩 윈도우로 변환된 데이터에서 **지역적인 특징** 추출 능력 확인 | SYN/UDP Flooding 등 훈련 데이터셋 내의 공격 유형에 대해서는 높은 본류 성능 달성 |
| **1D CNN + LSTM** | LSTM을 연결하여 트래픽의 **시간적 흐름** 학습 능력 강화 | 핵심 공격 유형에 대한 분류 성능을 어둑 향상시키는 데 기여 |

<br>

### 2. 문제 발생 및 모델 일반화 전략
| 초기 모델 한계 | 기술적 원인 파악 | 전력 전환 | 
|:---|:---|:---|
|**SYN/UDP** 외 다른 DDoS 공격 유형에 대한 **분류 성능 저하** 문제 발생 | 훈련 데이터셋에 포함되지 않은 미지의 공격 유형에 대해 **분류 모델의 일반화 능력** 부족 | **정상 트래픽(BENIGN)만을 학습**하는 **AutoEncoder 기반의 비정상 탐지** 접근 방식 추가 |

<br>

### 3. 최종 모델 전략: AutoEncoder를 활용한 일반화 강화
**1D CNN + AutoEncoder** 구조를 추가 도입하여 모델의 일반화 능력을 보완하고 미지의 공격에 대한 탐지율을 높였습니다.
- **탐지 로직**: 입력된 트래픽의 재구성 오차가 사전에 정의된 **임계값(Threshold)** 을 초과할 경우 **DDoS 공격**으로 판별

<br>

# 모델 성능 평가 및 해석
프로젝트 목표였던 **핵심 공격 유형 탐지**와 **미지의 공격 유형에 대한 일반화 능력 확보**를 검증하기 위해, 세 가지 모델 아키텍처에 대해 탐지 정확도 및 실시간 처리 성능을 비교 분석했습니다.
### 1. 모델별 성능 비교 분석
| 모델 아키텍처 | 모든 공격 정확도 | SYN 공격 정확도 | UDP 공격 정확도 | 평균 탐지 시간 | 핵심 해석 |
|:---|:---|:---|:---|:---|:---|
| **1D CNN** | **43.63%** | **100.00%** | **99.99%** | **3ms** | 훈련된 패턴에 극도로 강하지만, 미지의 공격에 대한 일반화 능력 부족 |
| **1D CNN + LSTM** | **46.86%** | **100.00%** | **100.00%** | **5ms** | 시계열 특징을 추가하여 **일반화 성능이 소폭 개선**되었으나, **탐지 시간 증가**(실시간 처리 효율성 저하) |
| **1D CNN + AutoEncoder** | **77.88%** | **0.00%** | **100.00%** | **1ms** | 미지 공격에 대한 **일반화 능력 대폭 향상, 실시간 처리 속도 최적화** 다만, 학습 방식의 근본적 문제로 특정 공격 유형 탐지 실패 |

### 2. 핵심 성능 분석 및 기술적 해석
**일반화 능력 확보**
- **모든 공격 정확도(46.86% → 77.88% 상승)**: **1D CNN + AutoEncoder** 모델은 다른 공격 유형이 포함된 평가 데이터셋에서 **31% 이상의 정확도 향상**을 보였습니다.
  이는 **정상 트래픽(BENIGN)만을 학습**하는비정상 탐지 방식이 훈련 데이터에 없는 **미지의 공격 유형**을 효과적으로 탐지하여, 모델의 **일반화 능력**을 성공적으로 확보했음을 의미합니다.
- **실시간 처리 최적화**: AutoEncoder는 다른 모델 대비 가장 낮은 **1ms 평균 탐지 시간**을 기록하였다.

<br>

**탐지 실패**
- **SYN 공격 탐지 정확도 0%**: AutoEncoder 모델이 **SYN Flooding** 공격을 **전혀 탐지 못하는** 문제가 발생했습니다.
-  **기술적 원인 및 보완 분석**:
    1. **패턴 유사성 문제**: AutoEncoder는 정상 데이터의 재구성에 특화되므로, SYN 공격 트래픽이 정상 데이터와 **구조적 패턴이 유사**하여 **정상 트래픽으로 오인**되었을 가능성이 가장 높았습니다.
    2.  **특징 누락 가능성**: SYN Flooding 공격은 TCP 3-way-handshake 과정 중 서버의 ACK 응답에 대한 클라이언트의 최종 ACK를 보내지 않아 서버의 연결 리소스를 고갈시키는 공격입니다.
     ACK Flag Count는 이러한 불완전한 연결 시도의 핵심적인 특징을 나타냅니다. 특징 추출 과정에서 해당 특징이 최종 21개 Feature에 포함되지 않았을 경우, AutoEncoder가 SYN Flooding의 핵심적인 비정상 패턴을 학습할 기회를 잃었을 가능성이 있습니다.

<br>

### 3. 결론 및 최종 전략
최종적으로, **1D CNN + LSTM** 모델이 **SYN/UDP 핵심 공격에 대한 완벽한 탐지율**을 제공하는 반면, **1D CNN + AutoEncoder** 모델이 **미지의 공격에 대한 뛰어난 일반화 능력**을 제공했습니다.

실제 환경에서는 이 두 모델의 장점을 결합하는 **앙상블(Ensemble) 전략**이나, AutoEncoder의 임계값을 동적으로 조정하는 **후처리 로직**이 필요함을 확인하며 연구를 마무리했습니다.


<br>

# 기술 스택
| 구분 | 스택 | 주요 활용 목적 |
|:---|:---|:---|
| **주 언어** | **Python** | 전체 프로젝트 로직 구현, 데이터 처리 및 분석, 모델링 전반에 활용 |
| **딥러닝 프레임워크** | **TesorFlow & Keras** | 1D CNN, LSTM, AutoEncoder 등 **딥러닝 모델 아키텍처 정의, 학습 및 튜닝**에 활용 |
| **데이터 처리** | **Pandas & NumPy** | **CIC-DDoS-2019 데이터셋 로드**, 슬라이딩 윈도우 기반 **시퀀스 데이터 형태로 변환**, 정규화 등 **데이터 전처리** 및 배열 연산에 활용 |
| **ML/통계** | **scikit-learn** | **Random Forest** 및 **RFECV**를 활용한 **특징 추출** |
